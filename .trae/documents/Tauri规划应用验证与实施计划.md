## 验证策略补充（V0-3 到 V0-5）

### V0-3 数据持久化最小验证

**目标**：确认 DB 文件存在且能持久保存

**验证步骤**：
1. **确认应用已启动**：确保 `pnpm tauri dev` 已成功运行
2. **执行写入操作**：
   - 在应用中打开每日日志（触发 `planning_open_daily`）
   - 或启动/停止一个任务（触发 `planning_start_task` / `planning_stop_task`）
3. **检查数据库文件**：
   - 找到应用配置目录下的 `planning.db` 文件
   - 使用 SQLite 工具查看数据库内容，确认数据已写入
4. **重启应用**：关闭并重新启动 Tauri 应用
5. **验证数据恢复**：
   - 检查之前创建的每日日志是否仍然存在
   - 检查任务状态是否正确恢复

**验收标准**：
- 数据库文件 `planning.db` 存在且包含正确数据
- 重启后数据能够正确恢复
- 没有出现重复建表/初始化报错

### V0-4 Doing 恢复与互斥验证

**目标**：确认 Doing 互斥和重启恢复功能正常

**验证步骤**：
1. **创建两个测试任务**：确保应用中有至少两个任务
2. **测试互斥性**：
   - 启动任务 A（触发 `planning_start_task`）
   - 启动任务 B（触发 `planning_start_task`）
   - 检查任务 A 是否自动停止
3. **测试重启恢复**：
   - 确保任务 B 处于 doing 状态
   - 重启 Tauri 应用
   - 检查任务 B 是否仍然显示为 doing 状态

**验收标准**：
- 同一时刻只有一个任务处于 doing 状态
- 切换 doing 任务时，上一个任务自动停止
- 重启后能正确恢复未停止的 timer 和 doing 状态

### V0-5 Vault 未选择的降级验证

**目标**：确认 Vault 未选择时的错误处理正常

**验证步骤**：
1. **确保未选择 Vault**：启动应用时不选择工作目录
2. **触发 IPC 调用**：
   - 尝试获取今日数据（触发 `planning_list_today`）
   - 或尝试打开每日日志（触发 `planning_open_daily`）
3. **检查错误处理**：
   - 打开开发者工具查看控制台日志
   - 检查应用界面是否显示空态或引导信息

**验收标准**：
- IPC 返回明确的错误码（如 `VaultNotSelected`）
- 前端显示空态或引导信息，不出现白屏或死循环
- 前端能正确处理错误，不崩溃

## 验证执行计划

1. **V0-3 数据持久化验证**：
   - 执行时间：约 15 分钟
   - 所需工具：Tauri 应用、SQLite 查看工具（如 DB Browser for SQLite）

2. **V0-4 Doing 恢复与互斥验证**：
   - 执行时间：约 10 分钟
   - 所需工具：Tauri 应用

3. **V0-5 Vault 未选择降级验证**：
   - 执行时间：约 5 分钟
   - 所需工具：Tauri 应用、浏览器开发者工具

## 验证结果记录

在执行验证过程中，需要记录以下信息：
- 数据库文件路径和内容
- 任务状态变化记录
- 重启前后的状态对比
- 错误信息和处理结果

## 后续开发计划

通过 V0 验证后，将进入新开发任务：
1. 实现新任务模态框设计
2. 完善后端功能
3. 增强前端状态管理
4. 测试与优化
5. 文档与代码优化

## 技术要点

- 所有验证步骤都需要在真实的 Tauri 应用环境中执行
- 验证过程中需要仔细观察应用状态变化和控制台日志
- 对于失败的验证，需要定位问题并修复后重新验证
- 验证结果将作为后续开发的基础，确保系统地基稳固