# 实现删除任务功能和补全左上角图标

## 1. 后端实现（Rust）

### 1.1 添加删除任务的Repo方法
- 在 `src-tauri/src/repo/planning_repo.rs` 中添加 `delete_task` 方法
- 实现逻辑：
  - 检查任务是否存在
  - 删除相关的计时器记录
  - 删除任务记录
  - 添加适当的日志记录

### 1.2 添加删除任务的Service方法
- 在 `src-tauri/src/services/planning_service.rs` 中添加 `delete_task` 方法
- 实现逻辑：
  - 调用Repo层的删除方法
  - 处理文件系统清理（如删除相关的Markdown文件）
  - 添加适当的错误处理和日志记录

### 1.3 添加删除任务的API端点
- 在 `src-tauri/src/commands/planning_cmd.rs` 中添加 `planning_delete_task` 命令
- 实现逻辑：
  - 验证Vault状态
  - 调用Service层的删除方法
  - 返回适当的成功或错误响应

## 2. 前端实现（TypeScript）

### 2.1 添加删除任务的API调用
- 在 `src/features/planning/planning.api.ts` 中添加 `planningDeleteTask` 函数
- 实现逻辑：
  - 调用后端API
  - 处理成功和失败情况
  - 返回标准化的结果

### 2.2 添加删除任务的Store方法
- 在 `src/features/planning/planning.store.ts` 中添加 `deleteTask` 方法
- 实现逻辑：
  - 保存快照用于回滚
  - 调用API删除任务
  - 乐观更新本地状态
  - 处理错误情况
  - 添加适当的任务状态管理

### 2.3 增强任务编辑模态框
- 在 `src/Home.tsx` 的任务编辑模态框中添加删除功能
- 实现逻辑：
  - 添加删除按钮
  - 实现删除确认对话框
  - 调用Store方法删除任务
  - 提供清晰的成功/失败反馈
  - 添加加载状态

## 3. 补全左上角图标
- 在 `src/Home.tsx` 中更新dashboard-logo组件
- 实现逻辑：
  - 使用适当的图标替换当前的"P"文字
  - 确保图标符合设计规范
  - 保持响应式设计

## 4. 测试和优化

### 4.1 错误处理测试
- 测试任务不存在的情况
- 测试Vault未选择的情况
- 测试权限错误
- 确保错误信息清晰易懂

### 4.2 性能优化
- 确保删除操作不会阻塞UI
- 优化本地状态更新
- 确保异步操作正确处理

### 4.3 用户体验优化
- 测试删除确认流程
- 测试删除后的UI反馈
- 确保加载状态显示正确

## 5. 预期效果
- 双击任务卡片可以进入编辑界面
- 在编辑界面中可以删除任务
- 删除任务时有确认对话框
- 删除成功后UI立即更新
- 左上角显示完整的图标
- 所有操作都有适当的错误处理

这个计划将全面实现删除任务功能，同时确保良好的性能和用户体验。