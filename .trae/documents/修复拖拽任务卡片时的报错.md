## 问题分析

拖拽任务卡片时出现两个控制台报错：

1. `Failed to load UI state: Command planning_get_ui_state not found`
2. `Uncaught (in promise) ReferenceError: saveSnapshot is not defined`

## 根本原因

1. **后端命令未注册**：在 `lib.rs` 的 `invoke_handler` 中没有注册 `planning_get_ui_state` 和 `planning_set_ui_state` 命令，尽管这些命令在 `planning_cmd.rs` 中已经定义。

2. **函数未导入**：在 `Home.tsx` 中调用了 `saveSnapshot` 和 `rollback` 函数，但没有从 `planning.store.ts` 中导入这些函数。

## 修复方案

### 1. 修复后端命令注册

在 `src-tauri/src/lib.rs` 文件的 `invoke_handler` 中添加以下两个命令：

```rust
commands::planning_cmd::planning_get_ui_state,
commands::planning_cmd::planning_set_ui_state,
```

### 2. 修复函数导入

在 `src/Home.tsx` 文件的导入语句中添加 `saveSnapshot` 和 `rollback` 函数：

```typescript
import { usePlanningStore, loadTodayData, markTaskDone, reopenTask, updateTask, startTask, stopTask, updateKanban, setIsDragging, reorderTasks, updateUIState, setCurrentVaultId, loadUIState, saveSnapshot, rollback } from './features/planning/planning.store';
```

## 预期结果

修复后，拖拽任务卡片时不再出现控制台报错，UI 状态能够正常加载和保存，任务排序能够正常进行。
